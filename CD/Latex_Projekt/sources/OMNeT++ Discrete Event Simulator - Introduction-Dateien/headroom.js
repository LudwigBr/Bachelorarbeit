(function(global,$){'use strict';window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.update.bind(this));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function Headroom(elem,options){options=options||Headroom.options;this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;}
Headroom.prototype={constructor:Headroom,init:function(){$(this.elem).addClass(this.classes.initial);setTimeout(function(){this.attachEvent();this.update();}.bind(this),100);},destroy:function(){this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);$(this.elem).removeClass(this.classes.unpinned);$(this.elem).removeClass(this.classes.pinned);$(this.elem).removeClass(this.classes.initial);},attachEvent:function(){if(!this.initialised){this.initialised=true;window.addEventListener('scroll',this.debouncer,false);}},unpin:function(){$(this.elem).addClass(this.classes.unpinned);$(this.elem).removeClass(this.classes.pinned);},pin:function(){$(this.elem).removeClass(this.classes.unpinned);$(this.elem).addClass(this.classes.pinned);},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;if(currentScrollY<0){return;}
if(toleranceExceeded){if(currentScrollY>this.lastKnownScrollY&&currentScrollY>=this.offset){this.unpin();}
else if(currentScrollY<this.lastKnownScrollY){this.pin();}}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'headroom--pinned',unpinned:'headroom--unpinned',initial:'headroom'}};global.Headroom=Headroom;}(this,document.id));